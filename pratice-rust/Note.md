# å®æˆ˜Rust

## Rust è¯­è¨€å­¦ä¹ è§‚

### å­¦ä¹ Rustçš„åæ¡æœ€ä½³å»ºè®®

- ä»æ•´ä½“å‡ºå‘ï¼Œä¸è¦è®©è‡ªå·±é™·å…¥åˆ°ç»†èŠ‚ä¸­å»
  - Rustè¯­è¨€æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ
  - Rustè®¾è®¡å“²å­¦æ˜¯ä»€ä¹ˆï¼Ÿ
  - Rustç¤¾åŒºå’Œç”Ÿæ€å¦‚ä½•ï¼Ÿ
- æŠ›å¼ƒä¸€æ¬¡æ€§å­¦ä¼šçš„å¿µå¤´ï¼Œåˆ†å±‚æ¬¡é€’è¿›å¼å­¦ä¹ 
  - å†…å­˜ç®¡ç†
  - ç±»å‹ç³»ç»Ÿ
  - æ‰€æœ‰æƒç³»ç»Ÿ
  - ç¼–ç¨‹èŒƒå¼
- å’Œä½ å·²çŸ¥çš„çŸ¥è¯†å»ºç«‹è”ç³»
- å­¦ä¼šé˜…è¯»æºç ï¼Œä»æºç ä¸­å­¦ä¹ 
- é€šè¿‡ä¸»é¢˜å¼é˜…è¯»å¡«è¡¥çŸ¥è¯†ç©ºç™½
- æ—¶åˆ»æŠŠæ¡Rustè®¾è®¡å“²å­¦
- æœ‰æ„è¯†åœ°æ„å»ºRustè¯­è¨€çš„å¿ƒæ™ºæ¨¡å‹
- å¤šåˆ†äº«å¤šæé—®å¤šäº¤æµ
- ä¸ºå¼€æºé¡¹ç›®åšè´¡çŒ®ï¼Œé”»ç‚¼è‡ªå·±
- é˜…è¯» ã€ŠRustç¼–ç¨‹ä¹‹é“ã€‹

## Rustè¯­è¨€æ¦‚è§ˆ

ææ¸…æ¥šä¸‰ä¸ªé—®é¢˜ï¼š

- Rustä»å“ªé‡Œæ¥ï¼Ÿ
- Rustæ˜¯ä»€ä¹ˆï¼Ÿ
- Rustè¦åˆ°å“ªé‡Œå»ï¼Ÿ



### Rust ä»å“ªé‡Œæ¥ï¼Ÿ

ä¸€é—¨è¯­è¨€çš„è¯ç”Ÿï¼Œæ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚

2006å¹´ï¼ŒèŒä¸šç¼–ç¨‹è¯­è¨€å·¥ç¨‹å¸ˆï¼ŒGraydon Hoare 

Graydoneå¯¹Rustè¯­è¨€çš„æœŸæœ›æ˜¯ï¼š

- å¿…é¡»å®‰å…¨ï¼Œä¸æ˜“å´©æºƒ
- ä¸éœ€è¦å¼•å…¥GCï¼Œæ³¨é‡æ€§èƒ½
- åº”è¯¥æ‹¥æœ‰å¹¿æ³›çš„ç‰¹æ€§ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºæ˜“äºç»´æŠ¤ï¼Œè°ƒè¯•ï¼Œä¸”æ›´å®‰å…¨æ›´é«˜æ•ˆçš„ä»£ç ã€‚

Rust Logo æ‰¿è½½äº†åˆ›é€ è€…å¯¹Rustè¯­è¨€çš„é¢„æœŸ

2020å¹´5æœˆ15æ—¥ Rustç¨³å®šç‰ˆå‘å¸ƒ 5å‘¨å¹´

- å†…å­˜å®‰å…¨ä¸ºç¬¬ä¸€å‡†åˆ™
- æ³¨é‡å¹¶å‘å®‰å…¨ï¼Œé¿å…æ•°æ®ç«äº‰
- æŒç»­æå‡æ€§èƒ½
- ä¿æŒè¯­è¨€çš„é«˜åº¦ä¸€è‡´æ€§
- è¯­è¨€å¿…é¡»ç”±å¯è§çš„å®ç”¨æ€§
- æ³¨é‡å¼€å‘ä½“éªŒå’Œå­¦ä¹ ä½“éªŒ
- ç°ä»£åŒ–è¯­è¨€ç‰¹æ€§
- æ‹¥æŠ±å¼€æº

### Rustæ˜¯ä»€ä¹ˆ

Rustæ˜¯æ–°æ—¶ä»£çš„Cè¯­è¨€ 

ç†ç”±

- Rustè¯­è¨€æ˜¯ä¸€é—¨é€šç”¨å‹è¯­è¨€
- Rustè¯­è¨€çš„å†…å­˜å®‰å…¨æ–¹æ¡ˆé’ˆå¯¹çš„æ˜¯Cè¯­è¨€çš„ä¸è¶³
- å®‰å…¨ä¸”æ— ç¼æ²Ÿé€šCè¯­è¨€
- Rustæ˜¯å…·æœ‰æ··åˆèŒƒå¼çš„é¢å‘è¿‡ç¨‹å¼çš„ç¼–ç¨‹è¯­è¨€
- å’ŒCè¯­è¨€ç±»ä¼¼ï¼Œæ‹…è´Ÿäº†æ—¶ä»£çš„ä½¿å‘½

Rustè¯­è¨€æ˜¯ä¸€é—¨é€šç”¨å‹è¯­è¨€

- Rustè¯­è¨€é€‚åˆæ‰€æœ‰é¢†åŸŸç»å¤§éƒ¨åˆ†åœºæ™¯ï¼Œè£¸æœºï¼Œæ“ä½œç³»ç»Ÿï¼Œç½‘ç»œæœåŠ¡ï¼Œä¸Šå±‚åº”ç”¨ç­‰
- ä¸å…¶ä»–è¯­è¨€æ¨ªå‘æ¯”è¾ƒï¼ŒRustæ‹¥æœ‰ç°ä»£åŒ–è¯­è¨€ç‰¹æ€§ï¼Œåº”ç”¨èŒƒå›´è¦†ç›–åˆ°C/Cpp/Java/Go/JavaScriptç­‰é¢†åŸŸ

Rustè¯­è¨€çš„å†…å­˜å®‰å…¨æ–¹æ¡ˆé’ˆå¯¹çš„æ˜¯Cè¯­è¨€çš„ä¸è¶³

- ç¦æ­¢å¯¹ç©ºæŒ‡é’ˆå’Œæ‚¬å‚æŒ‡é’ˆè¿›è¡Œè§£å¼•ç”¨
- è¯»å–æœªåˆå§‹åŒ–çš„å†…å­˜
- ç¼“å†²åŒºæº¢å‡º
- éæ³•é‡Šæ”¾å·²ç»é‡Šæ”¾æˆ–æœªåˆ†é…çš„æŒ‡é’ˆ

å®‰å…¨ä¸”æ— ç¼æ²Ÿé€šCè¯­è¨€

- é€šè¿‡C-ABI é›¶æˆæœ¬å’ŒCè¯­è¨€æ‰“äº¤é“
- åˆ’åˆ†äº†Safe Rustå’ŒUnsafe Rust 

Rustæ˜¯å…·æœ‰æ··åˆèŒƒå¼çš„é¢å‘è¿‡ç¨‹å¼çš„ç¼–ç¨‹è¯­è¨€

- RuståŒ…å«äº†é¢å‘å¯¹è±¡ã€å‡½æ•°å¼å’Œæ³›å‹ä¸‰ç§ç¼–ç¨‹èŒƒå¼
- OOPå’ŒFPèŒƒå¼åœ¨Rustè¯­è¨€ä¸­ä½œä¸ºè¯­è¨€ç‰¹æ€§è€Œå­˜åœ¨ï¼Œå¹¶éæ˜¯æŠ½è±¡æ–¹å¼
- Rustè®©ä½ ä¸“æ³¨äºè§£å†³é—®é¢˜æœ¬èº«ï¼Œè€Œä¸å—ç¼–ç¨‹èŒƒå¼æ€æƒ³æ¡†æ¶çš„å¹²æ‰°

å’ŒCè¯­è¨€ç±»ä¼¼ï¼Œæ‹…è´Ÿäº†æ—¶ä»£çš„ä½¿å‘½

- æ“ä½œç³»ç»Ÿé­é‡å‘å±•ç“¶é¢ˆï¼ŒRustæ¥æ‹¯æ•‘
- Rustæ˜¯WASIæ¨å¹¿å’Œæ™®åŠçš„èƒŒåæ¨æ‰‹
- åŸºäºRustå®ç°çš„è¯­è¨€å¦‚é›¨åæ˜¥ç¬‹å‘ç”Ÿ

### Ruståˆ°å“ªé‡Œå»ï¼Ÿ

Rustå°†ä¸ºå„ä¸ªé¢†åŸŸçš„åŸºç¡€è®¾æ–½å»ºè®¾åšå‡ºè´¡çŒ®ï¼Œæœªæ¥ä¹Ÿè®¸åœ¨å¤šä¸ªé¢†åŸŸå‡ºç°æ€æ‰‹çº§åº”ç”¨



## è¯­æ³•é¢é¢è§‚

### è¯æ³•ç»“æ„

ä¸¤å¤§çŸ¥è¯†ç‚¹

- Rustè¯­è¨€ç‰ˆæœ¬è¯´æ˜
- Rustè¯æ³•ç»“æ„

#### Rustè¯­è¨€ç‰ˆæœ¬è¯´æ˜

- Rustè¯­è¨€çš„ç‰ˆæœ¬åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç›¸äº’æ­£äº¤çš„æ¦‚å¿µï¼š
  - è¯­ä¹‰åŒ–ç‰ˆæœ¬(Sem Ver, Semantic Versioning)
  - å‘è¡Œç‰ˆæœ¬
  - Editionç‰ˆæ¬¡



##### è¯­ä¹‰åŒ–ç‰ˆæœ¬(Sem Ver, Semantic Versioning)

- å…¶æ ¼å¼ä¸ºï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œ ä¾æ¬¡ç”¨å¥å·éš”å¼€
- ç®€å•è¯´ä¸€ä¸‹è¯­ä¹‰åŒ–ç‰ˆæœ¬å·é€’å¢è§„åˆ™ï¼š
  - ä¸»ç‰ˆæœ¬å·ï¼šå½“åšäº†ä¸å…¼å®¹çš„APIä¿®æ”¹
  - æ¬¡ç‰ˆæœ¬å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
  - ä¿®è®¢å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£



##### å‘è¡Œç‰ˆæœ¬

- Master -> Nightly
- beta -> Beta
- Stable -> Stable 



##### Edition ç‰ˆæ¬¡

- 2015 Edition
- 2018 Edition (1.31.*)
- 2021 Edition

#### è¯æ³•ç»“æ„

##### å†…å®¹ï¼š

- äº†è§£Rustç¼–è¯‘è¿‡ç¨‹
- å…­å¤§è¯æ³•ç»“æ„

##### Rustç¼–è¯‘è¿‡ç¨‹

- Rust Code(UTF-8) åˆ†è¯
- Tokens è§£æ
- AST é™çº§
- HIR é™çº§ ç‰ˆæ¬¡çš„æ¦‚å¿µåœ¨è¿™ä¸€å±‚å°±æ²¡æœ‰äº†
- MIR ä¼˜åŒ–
- LLVM IR  ä¼˜åŒ–
- 0/1

##### Rust è¯æ³•ç»“æ„

- åŒ…å«å…­å¤§éƒ¨åˆ†
  - å…³é”®å­— keywords
  - æ ‡è¯†ç¬¦ Identifier
  - æ³¨é‡Š Comment
  - ç©ºç™½ Whitespace
  - è¯æ¡ Tokens
  - è·¯å¾„ Path

###### å…³é”®å­—

- ä¸¥æ ¼å…³é”®å­— Strict
  - As, break, const, contunue, crate, if, else, struct, enum, true, false, fn, for, in, let, loop, impl, mod, match, move, mut, pub, ref, return, self, Self, static, super, trait, type, unsafe, use, where, while, async, await, dyn, main
- ä¿ç•™å­— Reserved 
  - Abstratct, become, box, do, final, macro, override, priv, typeof, unsized, virtual, yield, try
  - è¢«ä¿ç•™çš„å…³é”®å­—ä¸ä»£è¡¨å°†æ¥ä¸€å®šä¼šä½¿ç”¨
- å¼±å…³é”®å­— Weak
- 2018 Edition: union, 'static
  - 2015 Edition: dyn
  - è¢«ä¿ç•™çš„å…³é”®å­—ä¸ä»£è¡¨å°†æ¥ä¸€å®šä¼šä½¿ç”¨

###### æ ‡è¯†ç¬¦

```rust
let thinking = "thinking";
let thinging123_ = "thinking 123";

// error : invalid suffix 'thinking' for integer literal
// let 321_thinking = "thinking";

// ok 
let _321_thinking = "thinking";

// non-ascii ident
// RFC: https://github.com/rust-lang/rfcs/blob/master/text/2457-non-ascii-idents.md
// error: unknown start of token: \u{1f914}
let ğŸ¯ = "thinking ";
```



##### æ³¨é‡Š

```rust
pub mod outer_module {
  //! - æ¨¡å—çº§æ–‡æ¡£æ³¨é‡Šï¼Œç½®äºæ¨¡å—å¤´éƒ¨
  //!! - æ¨¡å—çº§æ–‡æ¡£æ³¨é‡Š, 
}
```



###### ç©ºç™½

- Rust ä¸­ç©ºç™½ç¬¦åŒ…æ‹¬: \n, \t, tab ç­‰
- ä»»ä½•å½¢å¼çš„ç©ºç™½ç¬¦åœ¨Rustä¸­åªç”¨äºåˆ†éš”æ ‡è®°ï¼Œæ²¡æœ‰è¯­ä¹‰æ„ä¹‰ã€‚



###### è¯æ¡

- è¯­è¨€é¡¹ item åŸºäºçš„è¯­è¨€é¡¹

- å— Block

- è¯­å¥ Stmt

- è¡¨è¾¾å¼ Expr

- æ¨¡å¼ Pattern

- å…³é”®å­— Keyword

- æ ‡è¯†ç¬¦ ident

- å­—é¢é‡ Literal

- ç”Ÿå‘½å‘¨æœŸ Lifetime

- å¯è§æ€§ Vis

- æ ‡ç‚¹ç¬¦å· Punctuation

- åˆ†éš”ç¬¦ delimiter

- è¯æ¡æ ‘ Token Tree

- å±æ€§ Attribute

  

###### è·¯å¾„

- 

- 
- 

