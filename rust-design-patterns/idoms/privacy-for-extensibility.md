# 字段私有实现可扩展性

## 描述

使用私有字段确保结构是可扩展的，而不会破坏稳定性保证。

## 例子

```rust
mod a {
  // public struct 
  pub struct S {
    pub foo: i32,
    // private field.
    bar: i32,
  }
}

fn main(s: a::S) {
  // Because s::bar is private, it caonnet be named be here and we must use '...'
  // in the pattern. 
  let a::S { foo: _, ..} = s;
}
```

## 描述

在结构体中添加一个字段是一个基本向后兼容的变化。但是，如果客户端使用一种模式来解构一个结构体实例，他们可能会去命名结构中国的所有字段，而添加一个新的字段会破坏这种模式。客户端可以命名一些字段，并在模式中使用 ..., 在这种情况下，添加另一个字段是向后兼容的，将结构中的至少一个字段变成私有的，迫使客户端使用后一种形式的模式，确保结构是面向未来的。

这种方法的缺点是，你可能需要在结构中添加一个本来不需要的字段，你可以使用()类型，这样就不会有运行时开销，并在字段名前加上 _ 以避免未使用字段的警告。

如果Rust允许枚举的私有变体，我们可以使用同样的技巧向枚举添加变体向后兼容，那问题就是需要详尽的匹配表达式。私有变体会迫使客户端有一个 _ 统配符模式，一个常见的实现方式是使用#[non_exhaustive]属性来代替。

