# multi-model-databases-a-new-journey-to-handle-the-variety-of-data-Note 阅读笔记

## 数据以不同的格式和模型组织起来：

- 结构化数据 （structured data）
  - 关系数据
  - 键值数据
  - 图数据
- 半结构化数据 （ semi structured data）
  - XML 文档
  - JSON 文档
- 非结构化数据 （unstructured data)
  - 文本文件 ，包含日期、数据和 fact

## 多模型数据库的介绍：

- 通用的分类
- 对维度比较
- 介绍现有的方法和开放问题
- 从技术上
- 从应用上



对于处理多来源的数据且来源的数据是不同结构的数据，要么将数据存储在于不同数据模型相对应的不同数据库管理系统中，要么将四种类型的数据转换为单一格式，如关系格式并存储在关系数据数据库系统中。然而，在前一种情况下，我们需要解决以下问题：1、多个不同系统的安装与管理 2、加入存储在不同地方的数据。在后一种情况下，及时在关系型DBMS中存储分层或图形数据时可行的，但由于与平面关系的内在结构差异，查询评估的效率是一个瓶颈。

第三种是选择采用单一的多模型DBMS来利用前面两种解决方案的优势。1. 数据的存储方式对于特定的模型来说是最优的。2.只采用一个DBMS来方便地跨所有模型查询。多模型数据的单一数据平台不仅提供了统一的查询界面，而且还提供了一个单一的数据库平台，以简化查询操作。减少集成问题。并消除迁移问题，这对用户是有利的。

## 一般来说，现有两种方法来操作和查询多模型数据。

- 多模型持久化
  - 多模型持久化的历史可以追溯到多数据库和联盟数据库，这两个数据库在20世纪80年代被深入研究。他们的主要策略是利用不同的数据库来存储不同的数据模型。然后开发一个中介结构将它们整合在一起应答查询。
- 多模型数据库

最近的研究是在多元持久化平台上开发，DBMS的目标是拥抱多个处理和数据库平台，进行统一的声明式处理。BigDAWG提供了一个支持位置透明的结构。以及一个提供统一多接口的中间件。以三种不同的集成系统运行用户的查询。

另一个是建立一个单一的数据库来管理不同的系统。数据模型与全集成后台，以处理系统对性能、可扩展性和容错性的需求。全集成管理系统的框架可以追溯到ORDBMS的概念，DRDBMS借鉴并改造了面向对象的编程模型。融入了关系数据库。ORDBMS可以利用特定领域的功能来存储和处理各种格式的数据，如关系型、文本型、XML型、空间型、对象型。但是ORDBMS与多模型数据的突出区别在于，在ORDBMS框架中，只有关系模型是第一等公民，也就是说其他模型都是在关系技术上开发的，但是多模型数据库中，没有不可缺少的模型。每个模型都同等重要，与第一种多模型持久化系统相比。第二种持久化系统通过集成后台管理多个模型。可以满足日益增长的可扩展性、高性能和容错性的要求。



## 回顾多模型数据库的代表，总结了主要特点和技术，主要点包括：

- 介绍多模型DBMSDE领域及其与其他数据库技术的关系，提供了历史背景和一般分类的相关方法
- 从不同的角度对现有的多模型DBMS进行比较，用不同的标准。
- 对现有的多模型DBMS代表的主要特性进行了详细的概述和描述
- 剩余的未解决的问题

## 多模式数据库和多模型数据库之间的区别：

- 多模式数据库，数据类型可能包括语音、图像、视频、手写文本和指纹。
- 多模型数据代表的是用关系模型、树模型、图模型和对象模型等不同模型来管理数据的系统。



## 多模型数据库所支持的四种数据模型

- 关系型
  - 关系模型是基于数学项关系。及笛卡尔积的子集。数据在逻辑上表示为构成关系的元组。关系中的每条记录都由一个键值唯一标识。关系数据既可以定义并使用声明式方式进行查询，目前主要用结构化查询语言SQL表示。然后关系型数据库管理系统确保数据的存储和检索。关系数据库的例子包括金融和银行系统、计算机化医疗记录和在线购物、
- 半结构型
  - 半结构化模型的基础是在不明确和单独定义其模型的情况下表示数据的想法。相反。特定的信息片段被结构化、语义交织在一起定义其结构嵌套，这样的表示方式使得数据的处理和交换更加灵活。XML JSON
  - XML（可扩展标记语言）是一种可供人类阅读的，并且是一种可扩展的标记语言。机器可读标记语言。它的格式是文本式的，基于对Unicode的利用，以支持各种语言。数据的表达方式是 使用由标签分隔的元素，标签可以包含简单的文本、子元素或其 的组合。附加信息可以存储在元素的属性中。XML 被广泛用于任意数据结构的表示，如那些被用于 在网络服务中。
  - JSON是一种人类可读的开放标准格式，他是基于大多数编程语言中使用三种基本数据类型的任意组合的键值对，数据和对象。
- 键值型
  - 键值模型是NoSQL数据库中使用的最简单的数据模型，它对应的是关联数组、字典或哈希。在Key/value模型中，每条记录都由一个任意值和它的唯一Key组成，他可以存储、检索或修改值。该模型的相关操作的简单性使得数据处理效率很高。
- 图模型
  - 图数据模型是基于图形的数学定义，即有一组定点V和边E对应V的顶点对。在这个世界上大数据中存在一种特殊类型的数据库，称为图数据库，专门用于图数据的高效存储和管理，我们可以进一步区分两种图形数据库的类型，对应着两种主要的图形数据用例类型并在各自的用法上有所不同。事务性数据库与一大组较小的图形一起工作，如语言树等。非事务性数据库则相反，以单一的大图为目标。可能有几个组成部分。各项业务对应搜索最短路径。

## 多模型数据库的简史

在20世纪60年代中期，数据被存储在文件系统中。然后，在20世纪80年代初，关系型的数据系统出现了。数据库在企业数据管理中开始获得商业化的牵引力，主要是指： 1. 由于Edgar F.Codds的关系模型。后来： 在20世纪90年代，企业发现在许多应用中需要处理非关系型数据，因此开发了一些数据库，专注于一种特殊类型的数据应用，如面向对象的数据库、XML数据库、空间数据库或RDF数据库。今天，继续进化管理大数据和云应用。即对各地不同类型的数据进行大规模的写入、读取和分发。在 2010年代初，一些NoSQL数据库应运而生，如Cassandra、HBase。CouchDB、OrientDB、Neo4j、Asterix、ArangoDB或MongoDB等等。

通过回顾以上数据库的历史，可以发现一个趋势，那就是更多类型的数据在数据库中存储和处理。因此，这就要求开发一个多模型数据库系统，以便有能力管理不同的数据。种数据同时进行。我们可以观察到最近NoSQL数据库的一个趋势 在向多模型数据库发展的过程中。有许多数据库声称目前是多模型数据库。然而，对多模型数据库的支持程度还不够。数据差异很大，不同的模型查询能力不同，要想在不同的模型中进行索引，就必须在不同的模型中进行查询。



## 多模型数据库的分类法

- 多模型数据库支持的数据模型包括关系型、列型、键/值型、文档型、XML型、图型和对象型。

- 多模型数据库采用基于SQL、XML和图语言扩展的跨模型语言。

- 多模型数据库中的数据索引包括倒置索引、B-树、物化视图、哈希和位图索引。它们大多是基于关系数据库或XML数据库的扩展。

- 现有的多模型数据库具有数据分片、灵活 模式，以及云计算的版本。但他们仍然缺乏对多模型的支持交易。



## 多模型数据代表

### 关系存储

多模型系统中最大的一组自然是由关系存储形成的。

历史上关系型DBMS是最流行的数据库类型。

在大数据和NoSQL DBMS到来之前，SQL标准就已经向其他数据格式扩展(如SQL/XML中的XML)

关系模型的简单性和通用性使其能够比较容易地扩展到其他数据模型

#### PostgreSQL。

PostgreSQL8的开发始于20世纪80年代中期，目标是一个经典的关系型DBMS。然而，最近的版本带来了许多NoSQL的特性（例如，物化视图可以实现数据重复以加快查询评估或同步和异步主从复制）。此外，还存在一些供应商的设施，使其能够轻松地设置、操作和扩展PostgreSQL在云中的部署。

在支持XML格式之后，自2006年起，它还支持存储以下信息 键/值对 在数据类型HStore中。并且自2013年起，它支持存储JSON 格式的数据类型json和jsonb。在前一种情况下，数据的确切副本是 存储，而且每次访问都必须重新进行解析。另外，并非所有的操作都支持 (如包含和存在运算符)。对于jsonb来说，一个 分解的二进制格式用于数据存储。它不需要重排和 支持索引。但是，对象键的顺序、空白空间和重复的对象 键不被保存。基元类型被映射到本地PostgreSQL类型。

json和jsonb类型可以作为PostgreSQL的其他数据类型使用，例如在定义表列时。没有对存储的JSON数据的模式进行检查，但是，文档自然建议JSON文档在一个地方存储的特定集合中具有一定的固定结构。

存储在PostgreSQL数据类型json或jsonb中的数据可以使用JSON的SQL扩展进行查询，其中包括通过索引(->int)获取数组元素、通过键(->string)获取对象字段、或通过指定路径(#>text[])获取对象的运算符。它还支持更多的运算符，如双向包含值/路径(@>和<@)，一个字符串、任何一个字符串或所有字符串的顶层键存在(?、?&和?|)，连接(||)，以及删除键/值对或字符串元素(-text)、指定索引的数组元素(-int)或指定路径的字段或元素(#-text[])。PostgreSQL还提供了创建JSON、返回数组长度、JSON对象/数组扩展、检查数据类型、将JSON数据转换为记录或JSON数据聚合的函数。

存储在jsonb中的数据可以使用对应于一组对（key、posting list）的通用反转索引（GIN）进行索引。

默认情况下，GIN索引支持顶层的键存在运算符(?、?&和?|，分别用于单个字符串、所有给定字符串或任何给定字符串)和路径/值包含运算符@>。非默认的GIN索引只支持操作符@>。不同的是，在默认索引的情况下，每个键和值都会创建一个独立的索引项。在非默认索引的情况下，每个值都会创建一个索引项，作为该值和所有相关键的哈希。

#### SQL Server

微软SQL Server11开始于20世纪80年代末，是一个关系型DBMS。自2000年以来，它支持XML及其使用SQLXML的访问，因此被归类为一个 支持XML的数据库。自2016年起，它还支持JSON格式。而JSON数据的工作则与XML的支持十分相似。JSON数据可以是以数据类型NVARCHAR的纯文本形式存储。或者，函数OPENJSON使人们能够将JSON文本转换为关系表，或者使用预先定义的模式和映射来转换。

此外，由于Polybase的存在，SQL Server 2016也可以被认为是一个多模型多数据库的DBMS。Polybase是一种既能访问非关系型数据又能访问关系型数据的技术。特别是，它允许人们在Hadoop12或Azure blob存储13中的外部数据上运行SQL查询。Microsoft Azure SQL数据库是一个提供SQL Server功能的云数据库。

关于查询，SQLXML的目的与SQL/XML相同，但语法不同。Construct OPENXML可以通过使用用户定义参数的映射将XML数据看作是SQL关系。Construct FOR XML可以使用四种预定义的模式将关系数据作为XML文档查看，这四种模式表示了层次结构的复杂性。

如果是JSON数据，SQL Server可以导出JSON格式的关系数据（使用子句FOR JSON），测试文本值是否为JSON格式，或者解析一个JSON文本，并在指定的类似JavaScript的路径上提取一个标量值或一个对象/数组。功能JSON MODIFY使人们能够更新一个属性的值。

XML数据类型的列也可以进行索引。使用ORDPATH模式，存储的XML数据中的所有标记、值和路径都在主XML索引中进行索引。也可以创建二级索引--可以在对（路径、值）、元组（基表的主键、路径、值）或对（值、路径）上建立B+树。

出于查询优化的目的，SQL Server不支持对JSON数据采用任何特殊的索引技术。根据其存储情况，可以使用B-树或全文索引。

#### IBM DB2

对象关系型DBMS IBM DB214的第一个版本可以追溯到20世纪80年代初。IBM Db2 on Cloud是一个云上的全面管理数据库。自2007年起，它提供了对XML的支持，自2012年起，它还支持RDF图。

XML数据以反映层次结构的解析格式存储在原生的XML数据类型列中，或者使用用户定义的粉碎方式存储到关系表中。使用标准的SQL/XML访问数据，这些标准的SQL/XML通过一些DB2特定的构造得到增强，例如，将SQL查询嵌入到XQuery表达式中。

在XML数据类型的情况下，DB2支持几种类型的XML索引。每个XML文档的位置（即存储的区域）自动存储在XML区域索引中。独特的XML路径和它们的ID会自动在XML列路径索引中建立索引。使用用户定义的XML索引可以提高查询性能，用于选定的XPath表达式。

#### Oracle DB

对象关系型DBMS Oracle DB15作为第一个基于SQL的商用RDBMS于1979年发布。1997年发布的Oracle8是对象关系型数据库。2001年发布的Oracle9i，引入了存储和查询XML的功能。2013年发布的Oracle12c是为云计算而设计的，其特点是具有内存列存储功能，并支持JSON文档以及RDF数据。

XML数据的存储方式与DB2类似，在DB2的情况下，即要么碎成表，要么以原生的XML数据类型XMLType存储，而不需要使用模式。另一方面，JSON数据使用VARCHAR2、BLOB或CLOB存储为文本/二进制数据。同时在这种情况下，不需要数据的模式。Oracle只推荐使用is json CHECK约束。

XML数据在Oracle DB中使用标准SQL/XML访问。为了访问JSON数据，Oracle对SQL进行了扩展，增加了SQL/JSON函数、条件，以及一个点符号，其作用类似于json value和json query的组合。

在XML数据碎成对象关系表的情况下，自然可以使用B树索引。对于原生的XML存储，XMLIndex索引的路径、值以及父子、祖先-后代和兄弟姐妹的关系。ORDPATH编号模式的一个变体被用来存储节点的位置。

#### MySQL

开源关系型DBMS MySQL16于1995年发布。在2008年，它 被SUN Microsystems收购，2010年被甲骨文收购。2014年，第一个版本的 发布了支持数据共享和复制的MySQL集群。随着支持 的Memcached API17，它可以结合关系数据和键/值数据 访问优势。默认情况下，对（键、值）存储在同一个表中，即没有 模式必须被定义。然而，用户定义的键前缀可以确定一个预先定义的? 表和列的值应该被存储。大多数MySQL索引 用B树存储，R树用于空间数据类型，MEMORY表支持 哈希指数。

#### Sinew

DBMS Sinew是基于在传统的关系型DBMS之上创建一个新层的想法，它能够在没有预定义模式的情况下查询多模型数据（键/值、关系型、嵌套文档等）。数据的逻辑视图以通用表的形式提供给用户。该表的各列对应于数据集中的唯一键（嵌套数据是扁平化的）。

物理上，数据存储在底层的关系型数据库管理系统中。根据查询工作负载，逻辑表列的一个子集被具体化，其他列则被序列化在一个二进制列中。存储模式会根据不断变化的工作负载定期调整。

### 列式存储

另一大类多模型数据库的代表是NoSQL列存储。需要注意的是，"列式存储 "一词可以从两个方面来理解。(1)面向列的存储是指不存储数据表的DBMS 作为行，但作为列。这些系统通常用于分析工具中。例如，HPE Vertica就是一个例子。(2)列家族(或宽列)存储代表了一个 的NoSQL数据库类型，它支持具有不同数量和类型的表。的列，比如，Cassandra。底层存储策略可以是任意的。包括面向栏目，所以这两组可以重叠。

#### Cassandra。

Apache Cassandra18 是一款开源的NoSQL 列-家族存储。云应用的数据库DataStax Enterprise19，结果是 的Cassandra。使用类似SQL的Cassandra查询语言(CQL)，它能够存储 稀疏表中的数据。除了标量数据类型（如text或int），它还支持 三种类型的集合(list、set和map)、元组和用户定义的数据类型，以及存储和检索数据的相应操作。

在内部，数据被存储在SSTables（排序字符串表）中，最初是在Google系统Bigtable中提出的。一个SSTable是 "一个从键到值的有序的不可变的映射，其中键和值都是任意的字节字符串"。它又被分为若干块，这些块都有索引，以加快数据查找的速度。由于SSTable是不可变的，所以修改后的数据会存储到一个新的SSTable中，并定期使用压实进行合并。

自2015年起，Cassandra也支持JSON格式；但是，必须先指定各自的表，即数据的模式。

Cassandra查询语言（CQL）可 被认为是SQL的一个子集。它由子句SELECT、FROM、WHERE、GROUP BY组成。ORDER BY，和LIMIT。但是，在FROM子句中只能查询一个表，并且在FROM子句中只能查询一个表。WHERE子句中的条件有一定的限制，比如只限制于 到主键或带有二级索引的列等。仅支持排序 根据列决定数据如何排序和存储在磁盘上。子句SELECT JSON可以用来将每条记录作为单一的JSON编码映射返回。JSON和Cassandra类型之间的映射与存储的情况相同。

Cassandra 中有几种类型的索引。主键总是使用一个使用辅助表实现的倒置索引自动建立索引。二级索引可以根据我们想要的列显式地增加 搜索数据，包括收藏。各自的SSTable附属二级指数。(SASI)使用内存映射的B+树来实现，因此也允许范围 查询。

#### CrateDB

CrateDB20经过3年的开发，于2016年发布。它是一个分布式的面向列的SQL数据库，具有动态模式，也可以存储嵌套的JSON文档、数组和BLOB。它是建立在一些现有的开源技术上，如Elasticsearch21或Lucene22。CrateDB可以部署到任何能够运行Java的操作系统上，因此也可以部署到各种云平台上。

CrateDB中表的每一行都是一个半结构化的文档。CrateDB中的每个表都是在集群的节点上分片的，而每个分片就是一个Lucene索引。对文档的操作是原子式的。

CrateDB中的数据可以通过一个标准的ANSI SQL 92来访问。嵌套的JSON属性可以包含在任何SQL命令中。为此，CrateDB在基于Lucene索引的数据存储中添加了一个SQL层，使用Elasticsearch接口来访问底层的Lucene索引。

#### DynamoDB

亚马逊DynamoDB23于2012年发布，作为云数据库，其 支持（JSON）文档和键/值灵活的数据模型。在DynamoDB中，一个 表是无模式的，它对应于一个项的集合。一个项目是一个由 属性，并由一个主键识别。一个属性由一个名称、一个数据和一个主键组成。类型和一个值。数据类型可以是一个标量值（字符串、数字、布尔值等）、一个 文档（列表或地图），或一组标量值。表中的数据项不具有 以具有相同的属性。

DynamoDB主要支持一个简单的API，用于创建/更新/删除/列表表和放入/更新/获取/删除项目。更高级一点的功能是可以使用比较运算符对主索引或次索引进行查询。

在DynamoDB中支持两种类型的主键：分区键决定存储特定数据项的分区。排序键决定数据项在分区中存储的顺序。DynamoDB还支持全局和局部两种类型的二级索引。一个二级索引由以下几个部分组成 选定的基表的属性子集和相应的备用键。全局二级索引的分区键可以与基表不同，局部的二级指标不能。

#### HPE Vertica

HPE Vertica24是一个高性能的分析引擎，旨在管理大数据。HPE Vertica24是一个高性能的分析引擎，它是为管理大数据而设计的。Vertica提供了两种部署模式，可运行在 云。存储组织是面向列的，而它支持标准的 SQL界面丰富了分析功能。自2013年起，它被扩展为flex 表，它不需要模式定义，能够也存储半结构化数据（如JSON或CSV格式），并支持SQL 查询。

创建flex表与创建经典表类似，但列定义不同。Vertica 隐式地添加了一个 NOT NULL列raw，存储加载的半结构化数据。对于一个flex表 在没有其他列定义的情况下，它还增加了自动递增的列标识。用于分割和排序。装入的数据存储在一个内部地图中 数据格式VMap，即一组键/值对，称为虚拟列。选定的键 然后可以通过将虚拟列推广到真实表列来实现。

除了flex表本身，Vertica还为主flex表创建了关联键表（带有自述列键名、频率和数据类型猜测）和默认视图。表的键名列下的记录以及键的任何值都被用作视图列，如果没有值，列值为NULL。如果没有值存在，则列值为NULL。由于不需要存储数据的模式，因此键表和默认视图都可以探索数据以确定其内容。

可以使用SQL命令SELECT、COPY、TRUNCATE和DELETE来处理flex表。也可以创建自定义视图。可以使用经典的SELECT命令对虚拟列和实际列进行查询。在flex表或flex表视图上进行SELECT查询，调用maplookup()函数返回虚拟列的信息。通过将虚拟列推广为真实列来实现虚拟列的物质化，可以提高查询性能（代价是需要更多的空间）。推广flex表列的结果是一个混合表，因此原始数据和真实数据仍然可以一起查询。

### 键值存储

一般来说，键/值存储被认为是最不复杂的NoSQL DBMS，它只支持一个简单（但快速）的API，用于存储和检索具有特定ID的项目。然而，这些系统通常提供价值部分更复杂的操作；因此，向多模型系统的融合是一个相对自然的进化步骤。

#### Riak

.Riak25是2009年首次发布的经典密钥/值数据库管理系统。Riak25于2009年首次发布，是一个经典的键/值DBMS。在它之上，Riak CS提供了一个分布式云存储。自2014年起，Riak Search和Riak Data Types这两个功能使得Riak也可以作为一个具有查询功能的文档存储。Riak数据类型基于无冲突复制数据类型(CRDT)，涉及集合、地图、计数器等，可以进行索引和搜索。Riak Search 2.0实际上是Solr26的集成，用于索引和查询，Riak用于存储和分发。Riak Search必须首先配置一个Solr模式（最终是默认模式），以便Solr知道如何索引值字段。索引，例如，在XML或JSON文档的特定字段上的索引，被命名为Solr索引，并且必须是 与一个桶或一个桶类型相关联。桶类型要索引的字段是使用提取器从数据中提取出来的。Riak目前支持JSON、XML、纯文本和Riak数据类型提取器，但 也可以实现自己的提取器。

#### c-treeACE

FairCom c-treeACE27被其供应商表示为No+SQL DBMS，在一个数据库中同时提供NoSQL和SQL。c-treeACE支持关系型和非关系型API。它基于索引顺序访问方法（ISAM）结构，支持对记录、它们的集合或它们所存储的文件进行操作。最初的版本只支持ISAM API；2003年增加了SQL API。

### oracle NoSQL数据库。

Oracle NoSQL数据库28于2011年首次发布，是建立在Oracle Berkeley DB29基础上的可扩展、分布式NoSQL数据库。它可以 也可以使用Oracle Cloud作为完全托管的云服务运行。与甲骨文MySQL相反，甲骨文NoSQL数据库是一个键/值DBMS，它支持表API，即SQL。此外，由于增加了RDF支持 到Oracle Graph模块。首先，必须提供表的定义，其中包括 包括表和属性名、数据类型、主表键、索引等在Oracle NoSQL中同时存储关系型数据和JSON数据的一个例子。

Oracle NoSQL数据库二级索引是使用分布式、shard-local B-trees实现的[Oracle 2014]。DBMS支持对简单、标量以及非标量和嵌套数据值进行二级索引.

### 文档数据库

文档DBMS可以被认为是高级的键/值存储，具有可查询的复杂值部分。因此，每个文档存储可以被视为一种多模型DBMS，因为它自然也支持键/值或列数据的存储。

#### ArangoDB

与其他大多数DBMS相反，ArangoDB从一开始就是作为一个原生的多模型系统创建的。它的第一个版本是2011年发布的。它可以 也可以作为云端托管的数据库服务运行。它支持键/值、文档和 图数据。为了在所有数据模型之间进行查询，它提供了一种通用语言。然而ArangoDB主要是为文档服务的，以 客户端。文档以JSON格式表示，并以集合形式分组。A 文档包含一个属性集合，每个属性都有一个原子类型的值或 一个复合类型。

一个文档集合总是有一个主键属性键，在没有其他二级索引的情况下，文档集合的行为就像一个简单的键/值存储。特殊的边缘集合也存储文档，但它们包括两个特殊的属性，from和to，这使得文档之间能够建立关系。因此，存储在文档集合中的两个文档（顶点）被存储在边缘集合中的一个文档（边缘）连接起来。这是ArangoDB的图数据模型。

ArangoDB查询语言（AQL）允许复杂的查询。尽管数据模型不同，但它与SQL类似。在键/值存储的情况下，唯一可能的操作是单键查询和键/值对的插入和更新。对于文档存储，查询的范围可以从简单的 "举例查询 "到使用许多集合、使用函数（包括用户定义的函数）等复杂的 "连接"。对于图数据来说，各种类型的遍历图结构和最短的遍历图结构。路径搜索。最显著的区别可能是以下概念 从编程语言中借来的循环。

#### Couchbase

另一个支持多种数据模型的文档DBMS是 Couchbase30，原名Membase，最早发布于2010年，它可以很容易地 部署在云端。它既是键/值又是文档DBMS，具有基于SQL的功能。查询语言。文档（JSON格式）存储在称为桶的数据容器中。没有任何预定义的模式。存储方法是基于一个仅有附加的 为每个文件建立写入模型，以实现高效的写入，这也需要定期对文件进行压缩，以实现 清理。一种特殊类型的memcached buckets支持经常使用的数据的缓存。因此，它们减少了数据库服务器必须执行的查询次数。服务器 只提供内存中的存储，数据不在磁盘上保存。如果它的空间用完了 的RAM配额中，它使用最近使用的最少的算法（LRU）来清除 从RAM中取出项目。

Couchbase的基于SQL的查询语言，表示为N1QL，可以访问JSON数据，此外，还提供了key/value API、MapReduce API和地理数据的空间API。此外，还提供了地理数据的key/value API、MapReduce API和空间API。N1QL涉及经典子句，如SELECT、FROM、WHERE、GROUP BY和ORDER BY。

Couchbase中支持两种类型的索引--类似于关系型数据库中使用的B+树索引和B+trie。与B+树相比，B+trie提供了更有效的树结构，并保证了较浅的树层结构。



### MongoDB

可能是最流行的文档DBMS MongoDB31已于2016年底被宣布为多模型。它的文档模型，自然也可以存储简单的键/值对和类表结构，已经向图数据扩展。此外，MongoDB Atlas是一个云端托管的数据库服务。

一般来说，MongoDB中的文档（用JSON表示）有一个灵活的模式，因此各集合并不强制执行文档结构（除了字段id唯一标识每个文档）。用户可以决定是嵌入数据还是使用对其他文档的引用（可以形成一个图表）。

MongoDB查询语言采用JSON语法。它既支持使用条件选择文档，也支持对所选字段的投影 结果，访问任意深度的文档字段等。MongoDB不支持连接。关联文档的方法有两种。(1)手动引用，其中 一个文档包含了另一个文档的字段id，因此必须进行第二个查询。始终用于访问被引用的数据。(2)DBRefs引用，其中文档的 是用字段id、集合名和（可选）数据库名来引用的，也就是说，不同的文档集合可以相互链接。同样在这种情况下，第二个查询 必须用于访问数据，但有一些驱动程序涉及到帮助方法，这些方法是 自动形成DBRefs的查询。

#### Cosmos DB

微软的Azure Cosmos DB33是一个云端的、无模式的、原本是文档的数据库，支持符合ACID的事务。它是多模型的，它支持文档（JSON）、键/值、图和列式数据模型。对于一个新的大同数据库实例，用户选择一个数据模型和各自的API来使用。

对于访问文档、列式或键/值数据，大同数据库使用了一个类似于SQL的方法来实现。查询语言。每个查询都由子句SELECT和可选的 子句FROM、WHERE和ORDER BY。子句FROM可以涉及到内部连接，而我们 在JSON文档中，通过点符号和项目的位置来连接字段。数组。子句WHERE可以涉及到算术、逻辑、比较、位和字符串操作符。

### XML存储

XML存储可以被认为是一种特殊类型的文档数据库，但XML存储并不属于NoSQL数据库的核心组别，所以通常不用于大数据和各自的分布式处理。但是，XML存储不属于核心NoSQL数据库的范畴，所以通常不用于大数据和各自的分布式处理。

### 图存储
NoSQL图数据库能够存储最复杂的数据结构，并涉及特定的数据访问。因此，增加另一种类型的数据模型增加了复杂性的问题。这可能是为什么似乎只存在一个图多模型数据库的单一代表的原因。

### OrientDB

2010年发布的第一个版本OrientDB35是在对象DBMS的基础上实现的，目前它是一个开源的NoSQL DBMS，支持图、键/值、文档和对象模型。目前它是一个开源的NoSQL DBMS，支持图、键/值、文档和对象模型。它可以在大多数云环境中部署和管理。

存储元素是一个具有唯一ID的记录，并对应于一个文档（由一组键/值对形成）、一个BLOB、一个顶点或一个边缘。类包含并定义记录；但是，它们可以是全模式、无模式或模式混合的。类可以从其他类继承（所有属性）。如果定义了类的属性，它们可以被进一步约束或索引。

类可以有两种类型的关系。(1)引用关系是存储 作为物理链接，通过在源记录中存储目标记录ID来管理，类似于在内存中存储两个对象之间的指针。四种关系 是支持的--LINK指向一条记录，LINKSET、LINKLIST或LINKMAP指向多条记录。(2) 嵌入关系更强，存储在 嵌入的记录。嵌入的记录没有自己的记录，它们只有 通过容器记录访问，没有容器记录就不能存在。与链接类似。支持四种嵌入式链接。EMBEDDED, EMBEDDEDSET, EMBEDDEDLIST, 和EMBEDDEDMAP。

OrientDB支持用图遍历语言Gremlin或针对图遍历的SQL扩展来查询数据。SQL命令的主要区别在于用链接表示的类关系。不支持经典的连接，只需用点符号来导航链接。否则，主要的SQL子句以及嵌套查询都支持。

OrientDB使用了几种索引机制。SB-树是基于经典的B-树，针对数据插入和范围查询进行了优化。它有允许重复性和全文索引的变体。显著更快的可扩展哈希具有相同的变体，但不支持范围查询。Lucene 全文和空间索引插件也是可用的。

##  挑战和未决问题

- 多模型查询处理和优化
  - 尽管ORDBMS能够以各种格式存储数据，但它们并不提供跨模式的查询处理和优化。数据处理语言、模型间编译或各自的多模型查询优化。相比之下，多模型数据库试图通过以下方式迎接这一挑战： 开发一种统一的查询语言来适应所有支持的数据模型。如前几节所述，存在多模型查询语言的建议。例如，ArangoDB提供的AQL使人们能够同时访问图模型和数据模型。和文档数据。然而，现有的查询语言还不成熟，它是 开发一个成熟的多模型数据查询语言仍然是一个开放的挑战。
- 多模型模式设计和优化
  - 一个好的数据库设计 模式是影响很多方面的关键部分，如查询处理效率、应用扩展性等。在物理上和物理上都有关键的决定。和数据的逻辑模式。例如，如中所示，对于在键/值存储的情况下，一个天真的模式设计将导致20-35%的数据库。某个工作负载的交易失败，而这个问题可以得到缓解。通过设计一个合适的模式。一篇类似的论文提供了一个 基于成本的方法来优化列存储中的模式。与关系型 数据库，NoSQL数据库通常使用显著去正常化的物理模式。这需要额外的空间。因此，在多模型系统的世界里，我们会遇到对不同模型的矛盾要求，因此，它需要一个新的 多模型模式设计的解决方案，以平衡和权衡多模型数据的多样化需求。
- 多模型演化
  - 一般来说，有效地管理数据模式的演化以及将修改传播到数据库系统中的相关部分，如数据实例、查询、索引，甚至存储策略，是一项困难的任务。在一些较小的应用中，公司可以依靠熟练的数据库管理员来管理数据的演化，并手动将修改传播到其他受影响的部分。但在大多数情况下，这是一项复杂且容易出错的工作。
- 多模型可扩展性
  - 最后但并非最不重要的开放性问题是挑战。模型的可扩展性，可以在几个范围内考虑。首先，我们可以考虑模型内部的可扩展性，这意味着用新的模型来扩展其中一个模型。构造，例如，扩展XML模型，支持对IDs的查询和 IDREF(S)。其次，我们可以考虑模型间的可扩展性，增加新的构造来表达模型间的关系，例如可以表达一个CHECK 来自关系模型的约束，跨越关系数据和XML数据。而第三。我们可以提供模型外的可扩展性，包括添加一个全新的模型。以及相应的数据和查询，例如，添加时间序列数据的支持。的时间序列分析。

